(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{"./resources/pc/js/components/product/newProductDetail/ProductInfoBanners.vue":function(e,n,r){"use strict";r.r(n);r("./node_modules/regenerator-runtime/runtime.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.regexp.constructor.js"),r("./node_modules/core-js/modules/es.regexp.to-string.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js");var t=r("./node_modules/moment/moment.js-exposed"),o=r.n(t),s=r("./resources/share/js/libs/DcsService/index.js"),i={name:"ProductInfoBanners",components:{ProductInfoBanner:function(){return r.e(127).then(r.bind(null,"./resources/pc/js/components/product/newProductDetail/ProductInfoBanner.vue"))}},props:{prodInfo:{type:Object,required:!0}},data:function(){return{bannerList:[]}},computed:{banners:function(){var e=this;return _.isEmpty(this.bannerList)?[]:this.bannerList.map((function(n){var r=n.bannerUrl,t=n.cityCodeRegs,o=n.endDate,s=n.excludeProdOidList,i=n.label,a=n.linkUrl,u=n.startDate;return{label:i,bannerUrl:r,linkUrl:a,isBannerVisible:e.checkTargetCity(t)&&e.isIntervalTime(u,o)&&e.isProdOidEnabled(s)}}))},visibleBanners:function(){return _.filter(this.banners,(function(e){return!!e.isBannerVisible}))}},mounted:function(){this.getProductInfoBanner()},methods:{getProductInfoBanner:function(){return e=this,n=null,r=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getDynamicConfigVariant("product_info_banner");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:this.bannerList=e.t0;case 6:case"end":return e.stop()}}),e,this)})),new Promise((function(t,o){var s=function(e){try{a(r.next(e))}catch(e){o(e)}},i=function(e){try{a(r.throw(e))}catch(e){o(e)}},a=function(e){return e.done?t(e.value):Promise.resolve(e.value).then(s,i)};a((r=r.apply(e,n)).next())}));var e,n,r},checkTargetCity:function(e){var n,r;return!!_.isEmpty(e)||((null==(r=null==(n=this.prodInfo)?void 0:n.cities)?void 0:r.map((function(e){return e.city_code})))||[]).some((function(n){return e.some((function(e){return new RegExp(e).test(n)}))}))},isIntervalTime:function(e,n){if(_.isEmpty(e)&&_.isEmpty(n))return!0;var r=o()().format("YYYY-MM-DD HH:mm"),t=_.isEmpty(e)?r:o()(e).format("YYYY-MM-DD HH:mm"),s=_.isEmpty(n)?r:o()(n).format("YYYY-MM-DD HH:mm");return o()(r).isBetween(t,s,null,"[]")},isProdOidEnabled:function(e){return!_.includes(e,this.prodInfo.prod_oid)}}},a=r("./node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=Object(a.a)(i,(function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"product-info-banners"},this._l(this.visibleBanners,(function(e){return n("ProductInfoBanner",{key:e.key,staticClass:"mt-15",attrs:{"banner-url":e.bannerUrl,"link-url":e.linkUrl}})})),1)}),[],!1,null,null,null);n.default=u.exports},"./resources/share/js/libs/DcsService/index.js":function(e,n,r){"use strict";r.d(n,"b",(function(){return f})),r.d(n,"c",(function(){return p})),r.d(n,"d",(function(){return _})),r.d(n,"a",(function(){return l}));r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.replace.js"),r("./node_modules/core-js/modules/esnext.string.replace-all.js"),r("./node_modules/core-js/modules/es.string.search.js");var t=r("./node_modules/qs/lib/index.js"),o=r.n(t),s=r("./node_modules/@kkday/web-js-lib/dist/DcsSdk.js"),i=r.n(s),a=(r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/regenerator-runtime/runtime.js"),r("./resources/share/js/libs/KkDispatcher.js"));function u(e,n,r,t,o,s,i){try{var a=e[s](i),u=a.value}catch(e){return void r(e)}a.done?n(u):Promise.resolve(u).then(t,o)}function c(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var d=new(function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,r,t,o,s;return n=e,r=[{key:"fetchDynamicConfigVariant",value:(o=regeneratorRuntime.mark((function n(r,t){var o,s,i,u,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=f(r),n.prev=1,!o){n.next=9;break}return n.next=5,a.a.send({url:kkday.url.kkSiteUrl("dcs_api/ajax_get_dynamic_config_variant_preview"),method:"POST",data:{previewCaseOid:p(),previewConfigOid:_(),dynamicConfigKey:r}});case 5:if(200===(i=n.sent).status){n.next=8;break}throw new Error(i.statusText);case 8:return n.abrupt("return",i.data.data);case 9:return n.next=11,a.a.send({url:kkday.url.kkSiteUrl("dcs_api/ajax_get_dynamic_config_variant"),method:"POST",data:{dynamicConfigKey:r,conditionProperties:t}});case 11:if(200===(u=n.sent).status){n.next=14;break}throw new Error(u.statusText);case 14:if(c=null===(s=u.data.data)||void 0===s?void 0:s.caseOid,!e.shouldRegisterPreview(c,o)){n.next=20;break}return n.next=18,a.a.send({url:kkday.url.kkSiteUrl("dcs_api/ajax_register_preview_config"),method:"POST",data:{caseOid:c,conditionProperties:t,registerUrl:window.location.href}});case 18:200!==n.sent.status&&console.error("register dcs config fail");case 20:return n.abrupt("return",u.data.data);case 23:n.prev=23,n.t0=n.catch(1),console.error(n.t0);case 26:case"end":return n.stop()}}),n,null,[[1,23]])})),s=function(){var e=this,n=arguments;return new Promise((function(r,t){var s=o.apply(e,n);function i(e){u(s,r,t,i,a,"next",e)}function a(e){u(s,r,t,i,a,"throw",e)}i(void 0)}))},function(e,n){return s.apply(this,arguments)})}],t=[{key:"shouldRegisterPreview",value:function(e,n){var r="m.kkday.com"===window.location.host||"www.kkday.com"===window.location.host;return!n&&!r&&e}}],r&&c(n.prototype,r),t&&c(n,t),e}()),l=new i.a(d);l.setConditionProperties({platform:kkday.constants.getValue("IS_MOBILE")?"MWEB":"WEB",market:kkday.constants.getValue("COUNTRY"),language:kkday.constants.getValue("LANG_UI"),countryLang:kkday.constants.getValue("COUNTRY_LANG"),currency:kkday.constants.getValue("CURRENCY")});var m=o.a.parse(window.location.search.replaceAll("?","&")),f=function(e){return(null==m?void 0:m.preview_config_key)===e},p=function(){return(null==m?void 0:m.preview_case_oid)||""},_=function(){return(null==m?void 0:m.preview_config_oid)||""}}}]);